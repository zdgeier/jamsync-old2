{{template "head.html" args 
    "title" "About" 
    "canonical" "about" 
}}
<body>
    {{template "header.html" args "email" .Email}}
    <main>
        <section class="Projects">
            <h2>Browse Projects</h2>
            <p>These are some example projects, currently all projects are private.</p>
            <ul class="Projects-list is-hidden" id="projects">
            </ul>
            <div>
                <p class="Projects-list--empty is-hidden" id="projectsEmpty">Looks like you don't have any projects yet. Follow the instructions <a href="/download">here</a> to get started</p>
            </div>
        </section>
    </main>
    <script>
        async function populateProjectListEl() {
            let projectsResp = await fetch("/api/projects");
            let projectsJson = await projectsResp.json();

            if (!projectsJson) {
                let projectsEmptyEl = document.getElementById("projectsEmpty");
                projectsEmptyEl.classList.remove("is-hidden");
            }
            let frag = document.createDocumentFragment();
            for (let project of projectsJson.projects) {
                let temp = document.createElement("li");
                let projectLink = document.createElement("a");
                let email = `{{.Email}}`.replaceAll('\"', '')
                projectLink.href = `/${email}/${project.name}`;
                projectLink.innerHTML = project.name;
                temp.appendChild(projectLink);
                frag.appendChild(temp);
            }
            let projectsEl = document.getElementById("projects");
            projectsEl.innerHTML = "";
            projectsEl.appendChild(frag);
            projectsEl.classList.remove("is-hidden");
        }

        populateProjectListEl();
    </script>
    {{template "footer.html"}}
</body>
{{template "foot.html"}}